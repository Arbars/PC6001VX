<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="generator" content="ReText 5.3.1">
</head>
<body>
<p><link href="doc/markdown.css" rel="stylesheet"></link></p>
<h1 id="pc6001vx">PC6001VX マニュアル</h1>
<p>by eighttails<br>
<a href="http://eighttails.seesaa.net">http://eighttails.seesaa.net</a></p>
<p>目次</p>
<div class="toc">
<ul>
<li><a href="#pc6001vx">PC6001VX マニュアル</a><ul>
<li><a href="#_1">はじめに</a></li>
<li><a href="#_2">起動方法</a><ul>
<li><a href="#_3">必要なもの</a></li>
<li><a href="#_4">初回起動時の設定</a></li>
<li><a href="#_5">プラットフォーム固有情報</a><ul>
<li><a href="#windows">Windows</a></li>
<li><a href="#linux">Linux</a></li>
<li><a href="#android">Android</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_6">使い方</a><ul>
<li><a href="#_7">メニュー</a></li>
<li><a href="#_8">キーボードショートカット</a></li>
<li><a href="#_9">マウス操作</a></li>
<li><a href="#_10">環境設定</a></li>
</ul>
</li>
<li><a href="#_11">開発者情報</a><ul>
<li><a href="#_12">ライセンス</a></li>
<li><a href="#_13">ビルド方法</a><ul>
<li><a href="#windows_1">Windows</a></li>
<li><a href="#linux_1">Linux</a></li>
<li><a href="#android_1">Android</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_14">既知の不具合、制約事項</a></li>
<li><a href="#_15">更新履歴</a></li>
<li><a href="#_16">謝辞</a></li>
</ul>
</li>
</ul>
</div>
<h2 id="_1">はじめに</h2>
<p><img alt="Overview" src="doc/overview.png"></p>
<p>本プログラムは、ゆみたろ様(<a href="http://papicom.net">http://papicom.net</a>)作のPC-6001エミュレータ
PC6001VをLinux等で動作するよう改変したものです。<br>
PC6001VXの末尾のXはクロスプラットフォームのXです。(^^;<br>
ターゲットはLinuxなどのUNIXライクOSおよびAndroidを想定していますが、移植性の検証として
Windows用バイナリもリリースしています。が、こちらはほとんどおまけです。</p>
<h2 id="_2">起動方法</h2>
<h3 id="_3">必要なもの</h3>
<ul>
<li>
<p>ROMファイル<br>
エミュレータの動作には原則として、PC-6001シリーズの実機から吸い出したROMファイルが必要になります。<br>
<a href="http://p6ers.net/hashi/suidashi.html">http://p6ers.net/hashi/suidashi.html</a>を参考にして実機から吸い出してください。<br>
実機をお持ちでない場合、秋川様(<a href="http://homepage2.nifty.com/akikawa/basic.html">http://homepage2.nifty.com/akikawa/basic.html</a>)作成の互換ROMを使うという選択肢もあります。<br>
こちらの互換ROMにはCGROMファイルが含まれていませんが、拙作のCGROMファイルを使うことができます。<a href="http://eighttails.seesaa.net/article/305067428.html">http://eighttails.seesaa.net/article/305067428.html</a>
互換ROM使用時は初代PC-6001相当の動きになります。</p>
</li>
<li>
<p>WAVファイル<br>
mk2以降の場合、音声合成の固定語はWAVファイルとして用意する必要があります。
実機のモード5または6で「talk"f41."」を実行し、その音声をf41.wavの名前で録音して保存してください。
同様にf42~f44.wavも用意します。<br>
WAVファイルのフォーマットですが、作者は44kHzモノラルのWAVで動作確認しています。</p>
</li>
</ul>
<h3 id="_4">初回起動時の設定</h3>
<p>必要なファイルが揃ったらPC6001VXを起動してください。起動の方法はお使いのOSに合わせたプラットフォーム固有情報を参照してください。<br>
初回起動時には以下のエラーが出ると思います。</p>
<p><img alt="FirstBoot" src="doc/firstboot.png"></p>
<p>ROMファイルはここで提示されたフォルダ内を探しに行くので、その場所にROMファイルをコピーするか、すでに別の場所にROMファイルを用意していれば、その場所を参照するように設定を変更することができます。設定を変更する場合は「Yes」をクリックしてROMファイルのあるフォルダを指定してください。</p>
<p>ROMファイルのCRCが一般に知られているものと合わない場合、または互換ROM使用時は以下のメッセージが表示されます。</p>
<p><img alt="RomCRC" src="doc/romcrc.png"></p>
<p>警告されますが「Yes」をクリックすると以降ROMのCRCチェックをせずに起動するようになります。<br>
ただしこの後の動作は自己責任です。</p>
<h3 id="_5">プラットフォーム固有情報</h3>
<h4 id="windows">Windows</h4>
<ul>
<li>起動方法<br>
普通にPC6001VX.exeをダブルクリックして起動してください。</li>
<li>起動しない時は<ul>
<li>まずは以下のページからDirectXのランタイムをインストールしてください。
<a href="http://www.microsoft.com/ja-jp/download/details.aspx?id=35">http://www.microsoft.com/ja-jp/download/details.aspx?id=35</a></li>
<li>それでも起動しない時は、iniファイルを削除してください。<br>
Windows用にはsafemode.batを提供しています。
safemode.batでは設定ファイルを削除し、セーフモード(表示のハードウェアアクセラレーションを一時的にオフ)で起動します。
グラフィックボードが古くて画面が表示できない環境の人は、セーフモードで立ち上げて、設定画面からハードウェアアクセラレーションをオフに設定してください。</li>
</ul>
</li>
<li>設定、各種ファイル生成場所<br>
    exeファイルと同じフォルダにiniファイル、各種フォルダが生成されます。</li>
</ul>
<h4 id="linux">Linux</h4>
<ul>
<li>起動方法<br>
ソースからビルドして実行してください。ビルドの仕方については開発者情報の章を参照してください。</li>
<li>設定、各種ファイル生成場所<br>
~/.pc6001vxフォルダ以下にiniファイル、各種フォルダが生成されます。</li>
</ul>
<h4 id="android">Android</h4>
<ul>
<li>起動方法<br>
アプリケーションメニュー内に登録されたPC6001VXのアイコンをタップすると起動します。</li>
<li>設定、各種ファイル生成場所<br>
Androidの場合設定ファイルの生成場所は機種依存になり、一概に言えませんが、通常のファイルマネージャではアクセスできない場所に作成されることが多いようです。具体的な場所は環境設定ダイアログで確認してください。</li>
</ul>
<h2 id="_6">使い方</h2>
<h3 id="_7">メニュー</h3>
<p>エミュレータのメイン画面上でマウスを右クリックするとメニューが表示されます。<br>
Androidではメイン画面上でロングタップするとメニューが出ます。</p>
<p><img alt="Menu" src="doc/menu.png"></p>
<ul>
<li>
<p>システム</p>
<ul>
<li>リセット<br>
エミュレータをリセットします。</li>
<li>再起動<br>
エミュレータを再起動します。<br>
設定変更を反映するには再起動が必要です。</li>
<li>どこでもLOAD  </li>
<li>どこでもSAVE<br>
現在のP6の状態をそっくりそのまま保存して，あとで再開できます。<br>
ノートパソコンのレジュームやサスペンドと呼ばれる機能と同じようなものです。<br>
セーブするためのファイルは任意の名前(.ddr)をつけることができる他、1〜3番のスロットを用意しています。<br>
1番のスロットSAVEデータは(どこでもSAVEフォルダ)/1.ddrとして保存されます。2,3番も同様です。 <br>
<strong>注意！その1</strong><br>
この機能はまだまだ未完成です。
TAPEやDISKに書き込んでいる最中などは全く考えていませんので
イメージを破壊する可能性が大です。ご注意ください。<br>
<strong>注意！その2</strong><br>
どこでもSAVEファイルにはメモリの内容が含まれますので
著作権者の許可なく配布しないでください。 </li>
<li>
<p>リプレイ<br>
リプレイのメニューはその時の状態により変化します。  </p>
<ul>
<li>[通常時]<ul>
<li>再生  </li>
<li>記録  </li>
<li>記録再開<br>
以前記録したリプレイの記録終了時にresumeファイルが残っていれば「記録再開」でリプレイの続きを記録停止したところから記録することができます。</li>
</ul>
</li>
<li>[再生中]<ul>
<li>再生停止<br>
リプレイの再生を停止します。</li>
</ul>
</li>
<li>[記録中]  <ul>
<li>記録停止<br>
記録を停止します。<br>
停止時には途中保存と同じ「(リプレイファイル名).resume」ファイルを残します。</li>
<li>途中保存<br>
リプレイの記録中に、その途中の状態を保存することができます。<br>
「(リプレイファイル名).resume」ファイルをリプレイファイル(.ddr)と同じフォルダに残します。  </li>
<li>途中保存から再開<br>
ゲームのリプレイ記録中に失敗した場合など、リプレイの記録を停止せずに「途中保存」した地点に戻ってやり直すことができます。</li>
<li>１つ前の途中保存から再開<br>
ゲームのリプレイ記録中に失敗した場合、「途中保存から再開」出戻っても、途中保存の時点で詰んでしまって進めなくなることが時々あります。「途中保存」は5個まで過去の履歴を保存していますので、1つ前の途中保存からやり直すことができます。<br>
これを実行した場合、最新の途中保存は失われます。</li>
</ul>
</li>
</ul>
</li>
<li>
<p>ビデオキャプチャ<br>
エミュレータの動作を動画ファイルとして記録します。 <br>
記録を終了するにはもう一度このメニュー(「ビデオキャプチャ停止」に変わっています)を選択します。 <br>
動画の記録方式はWebM形式です。<br>
(MP4形式はライセンス面でリスクがあるため、対応を見送っています。)<br>
世の中ではあまり使われていない形式ですが、YouTubeは正式に対応しています。<br>
ニコニコ動画は正式対応をうたってはいませんが、実はアップロードには対応しています。<br>
動画の記録中は動作速度が極端に落ちるため(作者の環境で1/10くらい)、ゲームをプレイしながら動画にするといった使い方は現時点では無理です。<br>
あらかじめプレイをリプレイとして記録しておき、そのリプレイを再生しながら動画にするといった使い方を想定しています。(動画の記録中にリプレイが終了した場合、その時点で動画の記録も終了します。)<br>
マシンの処理速度にかかわらず、出来上がった動画は60FPSになります。</p>
</li>
<li>
<p>キーパネル<br>
<img alt="KeyPanel" src="doc/keypanel.png">  <br>
英語キーボードやモバイル機のキーボードで入力できないことが多いキーをボタンで入力できる補助キーパネルを表示します。<br>
ボタンはシフトキーと同時押しでも機能します。シフトキーを押してF1ボタンを押すとF6キーとして機能します。  </p>
</li>
<li>打ち込み代行<br>
テキストファイルから自動入力する機能です。<br>
対応しているファイルはtxt2bas仕様準拠です。  </li>
<li>終了<br>
PC6001VXを終了します。</li>
<li>TAPE<br>
テープイメージの挿入、取り出しの操作をします。<br>
対応するイメージファイルはP6T形式ですが、P6,CAS形式のファイルもマウントできます。</li>
<li>挿入<br>
テープイメージファイルをマウントします。  </li>
<li>取出<br>
テープイメージファイルを取り出します。</li>
<li>DISK<br>
ディスクイメージの挿入、取り出しの操作をします。<br>
対応するイメージファイルはd88形式です。<br>
操作はTAPEと同様です。  </li>
<li>拡張ROM<br>
拡張ROMイメージの挿入、取り出しの操作をします。<br>
操作はTAPEと同様です。  </li>
<li>ジョイスティック<br>
ジョイスティックがつながっている場合、P6のジョイスティック1,2に対する割り当てを設定します。</li>
<li>設定  </li>
<li>表示サイズ  <ul>
<li>50%~300％<br>
表示倍率を変えることができます。  </li>
<li>倍率を指定<br>
数値を直接入力することで任意の倍率で表示することができます。</li>
<li>倍率を固定<br>
通常はウィドウサイズを変更するとそれに追従して表示倍率が変わるようになっていますが、このチェックボックスをオンにすると、ウィンドウサイズにかかわらず固定のサイズで表示されるようになります。</li>
</ul>
</li>
<li>フルスクリーン<br>
フルスクリーンモードに切り替えます。  </li>
<li>ステータスバー<br>
ステータスバーの表示を切り替えます。  </li>
<li>4:3表示<br>
一般的にPCのアスペクトレシオ(ドットの縦横比)は1:1です。<br>
それに対してテレビの場合は 1.16:1 で ちょっと縦長なんだそうです。<br>
そのためPC上でそのまま表示すると横長に表示されてしまいます。  <br>
そこで縦方向を1.16倍に引伸ばして表示するのが 4:3表示 です。</li>
<li>
<p>スキャンライン<br>
P6の水平周波数はテレビと同じ15kHzです。
テレビでは走査線を偶数フィールドと奇数フィールドに分け飛び飛びに表示させる インターレース方式 を使っています。<br>
しかしP6を含む一般的なパソコンの場合，ちらつきを抑えるため、偶数走査線と奇数走査線が同じ位置を走査する ノンインターレース方式 を使っています。<br>
この場合，走査線数が半分になるため走査線と走査線の間に隙間が空いたような状態になります。<br>
この隙間を再現するのが スキャンラインモード です。<br>
エミュレータでスキャンラインモードを実現するためには実機の倍の画面解像度を必要とします。（実機が 320X200 なら 640X400 以上）<br>
当然，表示が重くなるため処理速度が落ちます。</p>
</li>
<li>
<p>ハードウェアアクセラレーション<br>
画面表示にハードウェアアクセラレーション(WindowsではDirectX,それ以外ではOpenGL)を使用する場合チェックします。<br>
デフォルトはオンです。描画に不具合がある場合はオフにしてください。ただしその場合、画面を高倍率で拡大すると処理が重くなります。  </p>
</li>
<li>
<p>フィルタリング<br>
グラフィックの拡大表示、4:3表示に際してフィルタリングを適用します。デフォルトはオンです。<br>
非整数倍拡大を自然に見せるための措置ですが、ボケた表示は嫌だという方は下記の手順でカクカク表示にできます。</p>
<ol>
<li>フィルタリングをオフにします。  </li>
<li>4:3表示をオフにします。</li>
<li>表示サイズを整数倍にします。</li>
</ol>
</li>
<li>
<p>TILTモード<br>
<img alt="Tilt" src="doc/tilt.png"><br>
3DS版のスペースハリアーに触発されて作ったジョーク機能です。<br>
ジョイスティック、カーソルキーの左右に反応して、画面が傾きます。(笑<br>
フルスクリーン時、またはステータスバー非表示の時はディスプレイ枠が表示されます。初代機の場合はPC-6042、それ以外の場合はPC-60m43が表示されます。</p>
</li>
<li>モード4カラー<br>
BASICモード1〜4時のスクリーンモード4のにじみ色を選択します。  </li>
<li>フレームスキップ<br>
エミュレータのフレームスキップ間隔を指定します。  </li>
<li>サンプリングレート<br>
サウンドのサンプリングレートを指定します。  </li>
<li>ウェイト無効<br>
エミュレータのウェイトを無効化し、全速力で動かします。  </li>
<li>Turbo Tape<br>
TAPEの読込み中はノーウェイトで動作させる機能です。<br>
リレーがONになっている間だけノーウェイトになり、リレーOFFと同時に通常動作に戻ります。<br>
ただ高速動作させるだけなので，タイミングが変わりにくく信頼性が高い反面、遅いマシンでは十分な効果が得られない場合があります。</li>
<li>Boost Up<br>
TAPEの転送速度は1200ボーですが，これはTAPEという媒体の信頼性の問題とサブCPUの処理能力から決まってくるようです。<br>
メインCPU（Z80）側には余裕があるらしく，待ち時間が結構あります。<br>
そこでBASICのワークエリアを監視し，待ちに入ったら即座に次のデータを送るようにすることで無駄な待ち時間を減らし,効率よく読込めるようになります。<br>
いろいろ試した感じでは N60で9倍, N60mで5倍 程度の効果が得られました。<br>
BASICモードにより限界が異なるのは 内部処理の違いと思われます。<br>
倍率は[設定]-[環境設定]-[その他]で変更することが出来ます。<br>
確実に高速化する反面，タイミングがシビアなソフトでは取りこぼしが発生したりROM内ルーチンを使用しない独自ローダーでは全く使えない場合があります。<br>
万能ではありませんので適宜使い分けてください</li>
<li>環境設定<br>
環境設定ダイアログを表示します。詳細は環境設定の章を参照ください。  </li>
</ul>
</li>
<li>
<p>デバッグ  </p>
<ul>
<li>モニタモード<br>
<img alt="MonitorMode" src="doc/monitormode.png"><br>
デバッグ用にレジスタ、メモリの状態の参照、ステップ実行をできるモードです。
「?」を入力するとヘルプが表示されます。  </li>
</ul>
</li>
<li>
<p>ヘルプ</p>
<ul>
<li>
<p>オンラインヘルプ<br>
オンラインヘルプを表示します。
WindowsではローカルのHTML、それ以外ではGitHub上のREADMEを表示します。</p>
</li>
<li>
<p>バージョン情報<br>
<img alt="About" src="doc/about.png"><br>
バージョン情報ダイアログを表示します。</p>
</li>
<li>
<p>About Qt<br>
PC6001VXに組み込んでいるQtのバージョンを表示します。</p>
</li>
</ul>
</li>
</ul>
<h3 id="_8">キーボードショートカット</h3>
<ul>
<li>PC-6001シリーズ特有のキー</li>
</ul>
<table>
<thead>
<tr>
<th align="left">キー</th>
<th align="left">機能</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">[PageUp]</td>
<td align="left">PAGE(↓↑)</td>
</tr>
<tr>
<td align="left">[End]</td>
<td align="left">STOP</td>
</tr>
<tr>
<td align="left">[ALT]</td>
<td align="left">GRAPH</td>
</tr>
<tr>
<td align="left">[Pause]<br>[カタカナ/ひらがな]</td>
<td align="left">かな</td>
</tr>
<tr>
<td align="left">[PageDown]</td>
<td align="left">MODE</td>
</tr>
<tr>
<td align="left">[ScrollLock]</td>
<td align="left">CAPS</td>
</tr>
</tbody>
</table>
<ul>
<li>各種機能キー</li>
</ul>
<table>
<thead>
<tr>
<th align="left">キー</th>
<th align="left">機能</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">[F6]</td>
<td align="left">モニタモード</td>
</tr>
<tr>
<td align="left">[ALT]+[F6]</td>
<td align="left">フルスクリーン切替え</td>
</tr>
<tr>
<td align="left">[F7]</td>
<td align="left">スキャンライン切替え</td>
</tr>
<tr>
<td align="left">[ALT]+[F7]</td>
<td align="left">4:3表示切替え</td>
</tr>
<tr>
<td align="left">[F8]</td>
<td align="left">モード４カラー切替え</td>
</tr>
<tr>
<td align="left">[ALT]+[F8]</td>
<td align="left">ステータスバー表示切替え</td>
</tr>
<tr>
<td align="left">[F9]</td>
<td align="left">ポーズ （トグル）</td>
</tr>
<tr>
<td align="left">[F10]</td>
<td align="left">ウェイト （トグル）</td>
</tr>
<tr>
<td align="left">[F11]</td>
<td align="left">リセット</td>
</tr>
<tr>
<td align="left">[ALT]+[F11]</td>
<td align="left">再起動</td>
</tr>
<tr>
<td align="left">[F12]</td>
<td align="left">スナップショット</td>
</tr>
<tr>
<td align="left">[無変換]</td>
<td align="left">どこでもSAVE(1番スロットを使用)<br>リプレイ記録中は途中保存</td>
</tr>
<tr>
<td align="left">[変換]</td>
<td align="left">どこでもLOAD(1番スロットを使用)<br>リプレイ記録中は途中保存から再開</td>
</tr>
</tbody>
</table>
<h3 id="_9">マウス操作</h3>
<p>ホイール付きマウスを使用している場合，動作速度の変更が出来ます。<br>
ホイールUPで増速，ホイールDOWNで減速，左クリックで等速に戻ります。<br>
動作速度の変化量は2倍速までが10%単位，2倍速を超えると100%単位です。  </p>
<table>
<thead>
<tr>
<th align="left">操作</th>
<th align="left">機能</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">右クリック</td>
<td align="left">メニュー表示</td>
</tr>
<tr>
<td align="left">左クリック</td>
<td align="left">動作速度を等速（100%）に戻す</td>
</tr>
<tr>
<td align="left">ホイールUP</td>
<td align="left">動作速度を上げる（20倍速まで）</td>
</tr>
<tr>
<td align="left">ホイールDOWN</td>
<td align="left">動作速度を下げる（0.1倍速まで）</td>
</tr>
</tbody>
</table>
<h3 id="_10">環境設定</h3>
<p>メニューの[設定]-[環境設定]を選ぶと、環境設定ダイアログが表示されます。<br>
設定変更を反映するには再起動が必要です。  </p>
<ul>
<li>
<p>基本<br>
エミュレーション対象機種とその構成に関する設定です。<br>
<img alt="Setting_Basic" src="doc/setting_basic.png">  </p>
<ul>
<li>機種<br>
エミュレーション対象の機種を選択します。<br>
動作には選択した機種から吸い出したROMが必要です。<br>
互換ROM使用時はPC-6001を選択してください。  </li>
<li>FDD接続数<br>
FDDの接続数を設定します。  </li>
<li>拡張RAMを使う<br>
初代PC-6001でPC-6006を使う際はチェックしてください。  </li>
<li>戦士のカートリッジを使う<br>
戦士のカートリッジを使用します。<br>
戦士のカートリッジの詳細については<a href="http://papicom.net/p6v/manual.html#soldier">こちら</a>を参照してください。  </li>
</ul>
</li>
<li>
<p>画面<br>
画面に関する設定です。<br>
<img alt="Setting_Screen" src="doc/setting_screen.png">  </p>
<ul>
<li>モード4カラー<br>
BASICモード1〜4時のスクリーンモード4のにじみ色を選択します。  </li>
<li>フレームスキップ<br>
フレームスキップの間隔を指定します。  </li>
<li>スキャンラインを表示する<br>
走査線と走査線の間の隙間を再現します。  </li>
<li>4:3表示有効<br>
画面の縦方向を1.16倍に引伸ばして画面全体の縦横比が4:3になるように表示します。</li>
<li>フルスクリーン<br>
フルスクリーンをオンにします。  </li>
<li>ステータスバーを表示する<br>
ステータスバーを表示します。</li>
<li>ハードウェアアクセラレーション<br>
画面表示にハードウェアアクセラレーション(WindowsではDirectX,それ以外ではOpenGL)を使用する場合チェックします。<br>
この設定の変更をした場合はPC6001VXを一度終了して起動しなおしてください。  </li>
<li>フィルタリング<br>
画面表示拡大時にフィルタリングをかけてなめらかにします。  </li>
</ul>
</li>
<li>
<p>サウンド<br>
サウンドに関する設定です。<br>
<img alt="Setting_Sound" src="doc/setting_sound.png">  </p>
<ul>
<li>サンプリングレート<br>
サウンドのサンプリングレートを指定します。  </li>
<li>バッファサイズ<br>
サウンドのバッファサイズを指定します。<br>
1,2上に大きくしてもかえって音飛びが大きくなるようです。  </li>
<li>PSGローパスフィルタ　カットオフ周波数<br>
PSGの音にローパスフィルタをかけます。0の時はオフです。  </li>
<li>マスター音量<br>
サウンド全体の音量を指定します。  </li>
<li>PSG、FM音量  </li>
<li>音声合成音量  </li>
<li>TAPEモニタ音量<br>
各音源ごとの音量を指定します。  </li>
</ul>
</li>
<li>
<p>入力<br>
キー入力に関する設定です。<br>
<img alt="Setting_Input" src="doc/setting_input.png">  </p>
<ul>
<li>キーリピート間隔<br>
キーリピート間隔を指定します。  </li>
</ul>
</li>
<li>
<p>ファイル<br>
エミュレータにマウントするファイルを指定します。<br>
ここで指定しておくとエミュレータを再起動してもファイルはマウントされ続けます。開発作業で同じイメージを使い続ける際には設定しておくと便利です。<br>
<img alt="Setting_File" src="doc/setting_file.png">  </p>
<ul>
<li>拡張ROM<br>
拡張ROMを使用する場合はそのファイルを指定します。  </li>
<li>TAPE(LOAD)<br>
テープイメージは破損防止のため、読み込み用と書き込み用のファイルを別々に指定するようになっています。<br>
TAPE(LOAD)は読み込み用のテープイメージファイルを指定します。  </li>
<li>TAPE(SAVE)<br>
書き込み用のテープイメージファイルを指定します。  </li>
<li>DISK1  </li>
<li>DISK2<br>
それぞれのドライブにマウントするディスクイメージファイルを指定します。  </li>
<li>プリンタ<br>
プリンタに出力した内容を書き出すファイルを指定します。  </li>
</ul>
</li>
<li>
<p>フォルダ<br>
各種ファイルを探索、保存する際のフォルダを指定します。
<img alt="Setting_Folder" src="doc/setting_folder.png">  </p>
<ul>
<li>ROM<br>
実機から吸い出したROMファイルを配置するフォルダです。</li>
<li>TAPE<br>
テープイメージファイルを開く際に始点となるフォルダです。</li>
<li>DISK<br>
ディスクイメージファイルを開く際に始点となるフォルダです。</li>
<li>拡張ROM<br>
拡張ROMファイルを開く際に始点となるフォルダです。</li>
<li>SnapShot<br>
F12キーで保存したスナップショットの画像ファイルが保存されるフォルダです。  </li>
<li>WAVE<br>
TALK文の固定語を録音したファイルを配置するフォルダです。</li>
<li>どこでもSAVE<br>
どこでもSAVEのファイルを保存するフォルダです。</li>
</ul>
</li>
<li>
<p>色<br>
エミュレータ画面に表示する色をカスタマイズできます。<br>
変更したい色をクリックすると色選択ダイアログが表示されるので、任意の色を選んでください。<br>
<img alt="Setting_Color1" src="doc/setting_color1.png"><br>
<img alt="Setting_Color2" src="doc/setting_color2.png">  </p>
</li>
<li>
<p>その他<br>
エミュレータの挙動に関する設定です。<br>
<img alt="Setting_Other" src="doc/setting_other.png">  </p>
<ul>
<li>オーバークロック率<br>
動作速度の倍率を指定します。  </li>
<li>システムROMのCRCチェック有効<br>
起動時にROMのCRCチェックを行います。<br>
CRCチェックが合わなかった場合、起動時に警告が出ます。<br>
何らかの原因によってCRCが一致しなかった場合、または互換ROM使用時はオフにしてください。  </li>
<li>ROMにパッチを当てる<br>
ROMにバグフィックスのパッチを当てます。  </li>
<li>TurboTape<br>
TAPEの読込み中はノーウェイトで動作させる機能です。  </li>
<li>BoostUp<br>
テープ読み込み高速化機能の高速化倍率を指定します。  </li>
<li>FDDアクセスウェイト有効　
FDDアクセス時にウェイトを入れるようにします。</li>
<li>終了時に確認する<br>
終了時に確認ダイアログが出るようになります。  </li>
<li>終了時にINIファイルを保存する<br>
終了時にINIファイルを保存します。<br>
このチェックをオフにすると、メニューから行った設定変更が保存されなくなります。  </li>
</ul>
</li>
</ul>
<h2 id="_11">開発者情報</h2>
<h3 id="_12">ライセンス</h3>
<p>ライセンスはオリジナルのPC6001Vのライセンスに従い、LGPLとします。<br>
ただし、FMGEN部分に関してはCISC様(<a href="http://retropc.net/cisc/m88/">http://retropc.net/cisc/m88/</a>)の設定されたライセンスに従います。この部分はフリーウェアにのみ使用を許可されています。<br>
このプログラムを使用したことによるいかなる損害も作者のeighttailsは責任を持ちません。</p>
<h3 id="_13">ビルド方法</h3>
<h4 id="windows_1">Windows</h4>
<p>MSYS2環境上でビルドします。</p>
<ol>
<li>こちら(<a href="http://sourceforge.net/projects/msys2/">http://sourceforge.net/projects/msys2/</a>)からMSYS2をダウンロードしてインストールしてください。<br>
VC++はサポートしていません。</li>
<li>MSYSをインストールしたフォルダ下の/mingw32/local/bin,/mingw32/bin,/usr/binにPATHを通す。  </li>
<li>MSYSをインストールしたフォルダのmingw32_shell.batを実行  </li>
<li>MSYS Shell上で<code>pacman -Syy &amp;&amp; pacman -Suu</code>を実行し、環境をアップグレードし、MSYS Shellを再起動。  </li>
<li>ダウンロードしたPC6001VXのソースをMSYS上のホームフォルダに解凍。  </li>
<li><code>cd PC6001VX/win32</code>を実行し、ソースフォルダのwin32フォルダにカレントを移動  </li>
<li><code>bash ./toochain.sh</code>を実行。ツールチェインをインストール  </li>
<li><code>bash ./buildenv.sh</code>を実行。QtのライブラリとQtCreatorをビルド<br>
QtCreatorが/mingw32/local/qt-creator/bin/qtcreator.exe,Qtスタティック版が/mingw32/localにインストールされます。</li>
<li><code>bash ./buildrelease.sh</code>を実行すると、PC6001VX-buildというフォルダにEXEがビルドされます。環境が正しく構築されたかどうかのチェックに使ってください。</li>
<li>自分でソースを修正、デバッグをする場合は、PC6001VX.proをQtCreatorで開いて、スタティック版Qtを指定してビルドしてください。</li>
</ol>
<h4 id="linux_1">Linux</h4>
<p>Debian系のディストリビューションについて解説します。</p>
<ol>
<li><code>apt-get install build-essential libx11-dev mesa-common-dev libsdl2-dev qtcreator qt5-default qtmultimedia5-dev libqt5x11extras5-dev libqt5multimedia5-plugins libavformat-dev libavcodec-dev libswscale-dev</code> を実行。  </li>
<li>ダウンロードしたPC6001VXのソースを解凍してください。  </li>
<li>PC6001VX.proをQtCreatorで開いてビルドしてください。<br>
IDEが嫌な人はQtCreatorの代わりにqmakeとqtライブラリを揃えればビルドできるでしょう。</li>
</ol>
<h4 id="android_1">Android</h4>
<p>こちらを参考にして環境を構築してください。<br>
<a href="http://qt-project.org/doc/qtcreator/creator-developing-android.html">http://qt-project.org/doc/qtcreator/creator-developing-android.html</a></p>
<h2 id="_14">既知の不具合、制約事項</h2>
<ul>
<li>起動するたびにシステムの音量を変えてしまうことがあります。
Qt5の音量制御周りはまだあまり枯れていないようです。</li>
<li>X11では、なぜかかなキー(PAUSE)の利きが悪いです。</li>
</ul>
<h2 id="_15">更新履歴</h2>
<p>■2.21.0 2016/05/03</p>
<ul>
<li>バージョン番号のスキームを変えました。今後のバージョン番号は(メジャーバージョン).(マイナーバージョン).(バグフィックス)とします。</li>
<li>モニタモードでブレークポイントにヒットすると固まるのを修正。</li>
<li>(Windows)ビルドオプションを変更。もしかしたらXPで動かくかも(無保証)</li>
</ul>
<p>■2.2 2016/04/24</p>
<ul>
<li>P6V1.24ベースに更新</li>
<li>ヘルプメニューにオンラインリファレンスへのリンクを入れた。</li>
<li>(Windows)safemode.batのオプションの書式が間違っていたので修正。</li>
<li>(Windows)環境によって起動しないことがあったので最適化オプションを修正。</li>
<li>(Android)レジュームに失敗することがあるのを修正。</li>
<li>(Android)UIが中華フォントで表示されていたのをMotoyaLMaruで表示するようにした。</li>
</ul>
<p>■2.11 2015/11/11</p>
<ul>
<li>リプレイに「1つ前の途中保存から再開」を追加</li>
<li>(Linux)WebMのオーディオにOpusを使うディストリビューションの場合クラッシュしてしまうので、強制的にVorbisを使うようにした。</li>
<li>(Windows)ビルド手順と環境構築スクリプトを修正。<br>
自前ビルドライブラリは/mingw32/localに集約。<br>
ビルド環境を作る場合は、一度MSYS2の再インストールから行ってください。</li>
</ul>
<p>■2.1 2015/08/29</p>
<ul>
<li>(Windows)(Linux)ffmpeg/libavを利用したビデオキャプチャ機能を実装</li>
</ul>
<p>■2.01 2015/01/10</p>
<ul>
<li>テープロード中にクラッシュすることがあるのを修正</li>
</ul>
<p>■2.0 2014/12/27</p>
<ul>
<li>P6V1.23ベースに更新</li>
<li>エミュレーション内のイベント処理を若干高速化。遅いマシン上でFPSが若干向上します。</li>
<li>フレームスキップを自動化
遅いマシン上で動かす場合、設定されているフレームスキップよりさらにフレームを間引き、エミュレーションの等速動作を優先するようにしました。あまりに非力でエミュレーション自体の等速動作をするパワーがない場合、最大で1FPSまでフレームレートが落ちます。</li>
<li>(Android)署名を付加。「提供元不明のアプリ」の許可が不要になりました。</li>
</ul>
<p>■2.0RC1 2014/10/19</p>
<ul>
<li>P6V1.22リリース版ベースに更新</li>
<li>補助キーパネルの実装。<br>
メニューから「キーパネル」を選ぶと、英語キーボードなどで入力しにくいキーをボタンで入力できるツールウィンドウが開きます。</li>
<li>キーイベントのハンドリングを一部変更<br>
モバイル機、小型特殊キーボードなどで、刻印と違うキーが入力されることが減ると思います。
記号のたぐいが入力できない場合は、シフトキーと併用してみてください。
P6実機上でシフトキーが必要な文字を入力するには、エミュレーター上でもシフトキーを押して入力する必要があります。</li>
<li>Androidで終了時にその時の状態を保存するようにした。OSによって殺された場合の挙動は未確認。</li>
<li>WindyさんのMAC用パッチを取り込み(文字コード関連)</li>
<li>(Windows)(Linux)フルスクリーン時にスクリーンセーバーを抑止するようにした。</li>
<li>ドキュメントをMarkdownで書き直した。</li>
</ul>
<p>■2.0Beta4 2014/08/15</p>
<ul>
<li>P6V1.22開発版ベースに更新  <ul>
<li>FM音源対応(暫定版)</li>
<li>未実装機能などの制約事項は本家に準じます。</li>
</ul>
</li>
<li>
<p>Androidの対応開始  </p>
<ul>
<li>対応OSはAndroid4.0以上、現時点でハードウェアキーボード必須です。</li>
<li>初回起動時はMinistroが立ち上がるのでそこからQtをダウンロードしてください。</li>
<li>エミュレーションメイン画面をタップで長押しするとメニューが出ます。</li>
<li>現時点では取り扱い注意の人柱版です。以下のような制約があります。</li>
</ul>
</li>
<li>
<p>【Android対応の制約事項】   </p>
<ul>
<li>キーボードによっては入力できないキーがあります。<br>
例えばASUSのTransformerシリーズのドックキーボードではファンクションキーがなく入力できません。</li>
<li>アプリがバックグラウンドに回った際、OSに勝手に終了させられることがあります。
終了時に自動的にどこでもSAVEするように対応する予定ですが、まだ未実装です。</li>
<li>バックグラウンドに回った場合、エミュレーションは一時停止しますが、裏でCPUパワーとバッテリを消費してしまいます。<br>
終了する際はメニューかタスクリストから終了してください。</li>
<li>GUIが中華っぽいフォントで表示されてしまいます。</li>
<li>音が出たり出なかったりします。Androidのシステムサウンド設定をいじっていると
　　復活することがあるようです。</li>
</ul>
</li>
<li>
<p>iniファイルを2つに分けた</p>
<ul>
<li>P6VX固有の機能追加に関する設定を扱いやすくするため、
本家P6Vと共通の設定はpc6001v.ini,P6VX固有の設定をpc6001vx.iniに分離しました。
エラーが出る場合、iniファイルを一度削除してください。</li>
</ul>
</li>
<li>
<p>ドットカクカク表示対応</p>
<ul>
<li>一部の方から要望のあった、ドットのカクカク表示に対応しました。</li>
<li>以下の手順をで設定するとドットがカクカク表示になります。<ul>
<li>メニューの設定→4:3表示をオフ</li>
<li>メニューの設定→フィルタリングをオフ</li>
<li>メニューの設定→表示サイズから整数倍の倍率を指定</li>
<li>メニューの設定→表示サイズ→倍率を固定をオン</li>
</ul>
</li>
</ul>
</li>
<li>
<p>ウィンドウサイズ、表示サイズを設定ファイルに記憶するようにした。</p>
</li>
<li>TALK文の固定語再生を実装(今まで未実装でしたすみません)<ul>
<li>waveフォルダにf41.wav~f44.wavを配置してください。</li>
<li>作者は44kHzモノラルのWAVで動作確認しています。</li>
</ul>
</li>
<li>リプレイ関係のバグをいくつか修正</li>
<li>CRC違いのROMで起動しようとした際にクラッシュすることがあるのを修正</li>
</ul>
<p>■2.0Beta3 2014/04/10</p>
<ul>
<li>
<p>(Windows)グラフィクスタックにANGLE経由のDirectXを使うようにした。<br>
IntelGPUでもハードウェアアクセラレーションが有効になり、軽くなる効果が期待できます。<br>
XPでは正常に動作しない可能性があり、勝手ながら本バージョンからXPは非サポートとします。
起動しない場合は、以下のページからDirectXのランタイムをインストールしてください。<br>
http://www.microsoft.com/ja-jp/download/details.aspx?id=35</p>
</li>
<li>
<p>Merged English translation.(Thanks Anna Wu!)<br>
When display language of OS is not Japanese, GUI of PC6001VX is displayed in English.</p>
</li>
<li>リプレイ関連機能強化<ul>
<li>リプレイ記録中に途中保存することができるようになった。<br>
リプレイメニューから「途中保存」「途中保存から再開」を選択することでリプレイを記録しながらプレイのやり直しができます。<br>
途中保存ファイルはリプレイファイルと同一フォルダにresume.ddsというファイル名で保存されます。
複数リプレイファイルを同一フォルダに置く場合は注意が必要です。<br>
また、途中保存ファイルは記録停止時にも保存されます。
リプレイ記録開始時に「記録再開...」を選んで既存のリプレイファイルを選択すると記録停止した時点からリプレイを追記することができます。
リプレイファイルが完成したらresume.ddsファイルは不要ですので削除して結構です。</li>
</ul>
</li>
<li>【リプレイに関する既知の問題、制約事項】  <ul>
<li>オートスタートが設定されているテープイメージを使っていると途中保存が正しく行われません。</li>
<li>シフトキー、ALTキー(GRPH)の入力を伴うリプレイは正しく再生されないようです。
このへんは本家では修正済みのようなのでリリースされ次第マージします。</li>
<li>リプレイ記録中にマウスホイールで速度変更をすると再生が正しく行われません。</li>
<li>途中ディスク、テープに書き込むするリプレイはイメージを破損するおそれがあります。</li>
</ul>
</li>
<li>どこでもSAVE/LOADにショートカットキー割り当て<br>
無変換/変換キーでスロットの1番を使ってどこでもSAVE/LOADを行います。リプレイ記録中は途中保存/途中保存から再開になります。</li>
<li>本家P6Vに実装済みだった、マウスホイールでスピード調整する機能を実装。</li>
<li>リプレイ再生中にTILTの動きを再現するようになった。</li>
<li>ウィンドウモードでもTILTするようになった。<ul>
<li>ステータスバーを非表示にするとディスプレイ枠が表示されます。</li>
</ul>
</li>
</ul>
<p>■2.0Beta2 2014/01/22</p>
<p>バグ修正</p>
<ul>
<li>どこでもLOAD時にクラッシュするのを修正</li>
<li>サンプリングレートを22050Hzにしていると落ちるのを修正</li>
<li>サウンドのマスターボリュームを変えてしまう問題は解消していませんが、
とりあえず右クリックしただけで音量がデフォルトに戻ってしまうのを修正</li>
<li>フルスクリーン時に表示される幅1ピクセルの謎の枠を表示されないようにした。</li>
<li>起動時のウィンドウのサイズ計算をちょっと修正</li>
</ul>
<p>■2.0Beta1 2014/01/15</p>
<ul>
<li>P6V1.21開発版ベースに更新<br>
SR対応(暫定版)、PC-6001Aに対応
SR対応の制約事項(FM音源に未対応など)は本家に準じます。</li>
<li>TILTモードの改良<br>
初代機、6001A選択時はモニター枠としてPC-6042Kが表示されるようにした。
キーボードでもTILTモードが使えるようにした。</li>
</ul>
<p>■2.0Alpha3 2013/08/18</p>
<ul>
<li>P6V1.19ベースに更新</li>
<li>OpenGLの機能チェックを改善<br>
Windows上でのIntelGPUなど、QtでOpenGLを使うための機能要件を満たさない場合、
自動的にソフトウェアレンダリングになります。</li>
<li>設定ダイアログを、より小さな画面に収まるようにレイアウトを修正</li>
<li>「=」が入力できないのを修正</li>
<li>「カタカナ/ひらがな」キーをかなキーにマップした(X11でPAUSEが効きにくい対策)</li>
<li>ウィンドウ最大化時にモニタモードやスキャンラインなど、
ウィンドウサイズが変わる操作をした場合に表示倍率が維持されないのを修正。</li>
<li>TILTモード中にモニタモードに入った場合ディスプレイ枠を消すようにした。</li>
<li>再起動時にジョイスティックが使えなくなるのを修正</li>
<li>(Windows)ビルドにQt5.1を使用</li>
</ul>
<p>■2.0Alpha2 2013/05/25(オフ会記念リリース)</p>
<ul>
<li>TILTモードにディスプレイの枠が表示されるようになった(フルスクリーン時のみ)<br>
Hashiさん、MORIANさん、THANKS!
他、主にバグ修正</li>
<li>遅いマシンでフリーズすることがあるのを修正(スケジューラのウェイト計算ミス)</li>
<li>設定画面でキーボード入力が効かないのを修正</li>
<li>4:3表示の際、画面下にゴミが出ているのを修正</li>
<li>メニュー表示中に右クリックすると二重にメニューが表示されてしまうのを修正</li>
<li>スナップショット保存が動いていなかったのを修正</li>
<li>(Windows)初回起動時のROMフォルダ選択ダイアログで「いいえ」を選択すると
GUIが暴走するのを修正</li>
</ul>
<p>■2.0Alpha 2013/05/07</p>
<ul>
<li>SDLで行われていたグラフィック描画、イベント処理、キー入力、サウンド出力をQt5に移行。<br>
これにより、バージョン1.0系列の既知の不具合は解消。
ただし新たな不具合も発生(汗</li>
<li>グラフィックの描画にQtを使用<br>
QtとOpenGLを用いた無段階の拡大縮小が可能になっています。
また、4:3表示もQt側で引き伸ばしを行うことで自然な表示になっています。
また、環境設定の色数設定はなくなりました。
内部処理は256色、描画はディスプレイの色深度で固定になります。</li>
<li>ジョイスティック入力のみSDL2を使用。<br>
proファイルにて、DEFINES+=NOJOYSTICKと指定すると、
ジョイスティックサポートが外れる代わりに、Qt5のみで全てビルド可能。</li>
<li>ZLib,libPNGが不要になった。</li>
<li>TILTモードの追加<br>
3DS版のスペースハリアーに触発されて作ったジョーク機能です。
ジョイスティックの左右に反応して、画面が傾きます。(笑
キーリピートの関係でカーソルキーには対応できませんでした。すみません。
一応スペハリを想定して作っていますが、オリオンでもなかなか良い感じに酔えます。
その他、クエスト、バンダル、AX-9、アステロイドチューブ、プラズマラインなど、3D視点のゲームでお楽しみください。(ジョイスティックに対応してればの話ですが)
Qtではグラフィックの拡大縮小回転が簡単に行えるので、そのデモンストレーションでもあります。</li>
<li>フォントファイルはバイナリに埋め込んだリソースから直接読むようにした。
　fontフォルダを作らなくなった。</li>
<li>従来M+Outlineから生成していたフォントファイルをM+Bitmapベースに切り替えた。
だいぶ見やすくなったと思います。</li>
<li>スケジューラーのウェイト計算方法を変えた。
CPU使用率も下がって、サウンドのバッファアンダーフローによるプチノイズもだいぶ減ったと思います。</li>
</ul>
<p>■1.01　2013/01/02</p>
<ul>
<li>P6V1.17ベースに更新
本家に取り込まれた色にじみコードを再取り込み。にじみSet1に対応。</li>
<li>右クリックメニューに「終了」がなかったのを修正(汗</li>
</ul>
<p>■1.0　2012/11/30</p>
<ul>
<li>P6V1.16ベースに更新</li>
<li>新色にじみ方式(通称J方式)のにじみカラー出力を実装</li>
<li>初回起動時にROMフォルダを指定できるようにした。</li>
<li>二重起動防止にQtSingleApplicationを使用。ロックファイルを作らなくなった。</li>
<li>スレッド処理にTLS(スレッド局所記憶)を使わないようにした。</li>
<li>ステータスバー、モニタモード用の半角英数フォントを手作業でちまちま修正した。<br>
多少見やすくなったと思います。</li>
<li>(Windows)ライブラリを可能な限りスタティックリンクにした。</li>
<li>(Windows)ゆみたろさんのパッチを当ててSDLをビルド。今までサボってましたすみません。</li>
<li>(非Windows)TAPE,DISKなどのフォルダのデフォルト設定を空白にした。<br>
明示的に設定しない場合、ホームフォルダから探しにいきます。</li>
</ul>
<p>■1.0β2　2012/03/09
バグ修正</p>
<ul>
<li>CRCが合わないROMを使用している場合、警告を出した上でCRCチェックを無効にできるようにした。</li>
<li>ボリュームの設定が全てマスターに反映されてしまうのを修正。</li>
<li>スキャンライン輝度が常に1として保存されてしまうのを修正。</li>
</ul>
<p>■1.0β　2012/02/06</p>
<ul>
<li>初リリース。　P6V1.13ベース</li>
</ul>
<h2 id="_16">謝辞</h2>
<p>オリジナルのPC6001Vを製作され、移植を快諾してくださったゆみたろ様、<br>
Mac版を通じ、移植の障害を取り除いてくれていたであろうWindy様、<br>
Qtについて勉強する機会を提供してくださった関東Qt勉強会および元NOKIAのエンジニアの皆様、<br>
そしてP6コミュニティの皆様に厚く感謝申し上げます。</p>
</body>
</html>
